# pod configuration — all values have sensible defaults.
# Edit this file to customise agent behaviour.

[project]
coordination = "./coordination"    # Path to coordination script
worktree_base = "worktrees"        # Where git worktrees are created
session_dir = "sessions"           # Session stdout capture directory
build_cache_dir = ".lake"          # Build cache to rsync into worktrees
protected_files = ["PLAN.md"]      # Files agents may not modify in PRs

[claude]
model = "opus"                     # Claude model to use
quota_check = "~/.claude/skills/claude-usage/claude-available-model"
quota_retry_seconds = 60           # Sleep duration when quota unavailable

[pricing]
# Dollars per million tokens
input = 5.00
output = 25.00
cache_read = 0.50
cache_create = 6.25

[dispatch]
# Built-in strategies: "queue_balance", "round_robin"
# Or a path to a custom script (receives env vars, prints worker type name)
strategy = "queue_balance"
min_queue = 3                      # queue_balance: below this → planner-type

[monitor]
poll_interval = 2                  # Seconds between status updates
jsonl_stale_warning = 300          # Warn if JSONL unchanged for this many seconds
jsonl_missing_warning = 60         # Warn if JSONL not created after this many seconds

# --- Worker Types ---
# Each [worker_types.<name>] defines a type of agent session.
# The dispatch strategy chooses among these.

[worker_types.plan]
prompt = "/plan"
lock = "planner"                   # Acquire this lock before running
copy_build_cache = false

[worker_types.feature]
prompt = "/feature"
issue_label = "feature"            # Only claims issues with this label
copy_build_cache = true

[worker_types.review]
prompt = "/review"
issue_label = "review"
copy_build_cache = true

[worker_types.summarize]
prompt = "/summarize"
issue_label = "summarize"
copy_build_cache = false

[worker_types.meditate]
prompt = "/meditate"
issue_label = "meditate"
copy_build_cache = false
