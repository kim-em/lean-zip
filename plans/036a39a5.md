# Review Session: Split InflateCorrect, Factor readExact

- **Session UUID**: 036a39a5-6ef4-4f5d-b353-c89431e1055e
- **UTC start**: 2026-02-23T03:00:00Z
- **Type**: Review

## Deliverables

### 1. Split InflateCorrect.lean (1217 lines → under 1000)

Extract dynamic tree proof infrastructure into a separate file:
- `Zip/Spec/DynamicTreesCorrect.lean` — readCLCodeLengths, decodeCLSymbols,
  fillEntries helpers, and decodeDynamicTrees_correct (~600 lines)
- Keep main `inflateLoop_correct` and `inflate_correct` in InflateCorrect.lean

### 2. Factor duplicated readExact

Three near-identical implementations:
- `Zip/Archive.lean:338` — `readExact` (Handle-based)
- `Zip/Tar.lean:159` — `readExact` (Stream-based)
- `Zip/Archive.lean:352` — `readExactStream` (Stream-based)

Factor the Stream-based ones into a shared helper (likely in Handle.lean
since it already has IO shims).

### 3. Note for future: bang indexing

16+ locations where `xs[i]!` is used inside loops with provable bounds.
Not addressed this session — would require `h : i < xs.size` capture
syntax changes throughout IO code. Record in CLAUDE.md for future review.
