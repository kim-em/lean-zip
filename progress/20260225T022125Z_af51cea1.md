# Progress: Track B1 — Raise size bound from 5MB to 500MB

- **Date**: 2026-02-25 02:21 UTC
- **Session type**: feature (work meta-dispatch)
- **Issue**: #262
- **Branch**: agent/af51cea1

## What was done

Raised the DEFLATE decoder fuel and output size limits to increase the
proven data size bound from 5MB to 500MB:

1. **Symbol fuel**: 10,000,000 → 1,000,000,000 in both spec
   (`Deflate.Spec.decodeSymbols`) and native (`Inflate.decodeHuffman`)
2. **maxOutputSize**: 256 MiB → 1 GiB in `Inflate.inflate`,
   `Inflate.inflateRaw`, and the proof-level decompressors
   (`GzipDecode.decompressSingle`, `ZlibDecode.decompressSingle`)
3. **hsize bounds**: Updated all roundtrip theorem statements:
   - Lazy LZ77 path (levels 2-4): `data.size < 5000000` → `< 500000000`
   - Greedy LZ77 path (level 1, level 5+): `data.size < 10000000` → `< 1000000000`
   - Stored path (level 0): `data.size ≤ 256*1024*1024` → `≤ 655000000`
   - Unified `inflate_deflateRaw`: `< 500000000` (tightest across all levels)
   - Gzip/zlib framing: `< 500000000`
4. **inflate_complete**: `result.length ≤ 256*1024*1024` → `≤ 1024*1024*1024`

Files modified: 12 (across Zip/Native/ and Zip/Spec/)

## Decisions

- **Block fuel (10001) unchanged**: Already covers ~655MB (10001 × 65535
  bytes/block), sufficient for the 500MB bound.
- **Stored path bound**: Set to `≤ 655000000` (limited by block fuel),
  not 1GiB. This is fine because `inflate_deflateRaw` passes `by omega`
  from `hsize : data.size < 500000000`.
- **Native API defaults unchanged**: The user-facing `Native.Gzip.decompress`,
  `Tar`, and `Archive` functions keep their 256MiB defaults as safety limits.
  Only the proof-level functions and `Inflate.inflate`/`inflateRaw` were raised.

## Sorry count

Unchanged: 3 (1 in GzipCorrect.lean, 2 in ZlibCorrect.lean)

## What remains

- The block fuel (10001) could be raised in a future Track B1 step to push
  stored-block support past 655MB, but this is not needed for the 500MB target.
- Track B2 (replacing fuel with structural termination) would eliminate all
  fuel-based bounds entirely.
