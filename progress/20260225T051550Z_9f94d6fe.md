# Session 9f94d6fe — Feature: Native Compression Benchmarks

**Issue**: #269 — Track D: benchmark native compression throughput + ratio vs FFI
**Branch**: `agent/9f94d6fe`
**Starting commit**: `fb1fd4a`

## Deliverables

1. **New file `ZipTest/NativeCompressBench.lean`** (115 lines)
   - Throughput benchmarks: native Lean compressor vs FFI (zlib) for raw deflate, gzip, zlib
   - Compression ratio comparison at 32KB
   - Covers levels 0, 1, 6 with constant/cyclic/prng data patterns
   - Sizes: 1KB, 4KB, 16KB, 32KB

2. **Modified `ZipTest.lean`** — registered new benchmark module

## Key Discovery: Stack Overflow Limit

The original plan targeted 1MB benchmarks. Native LZ77 (`lz77Greedy_mainLoop`)
uses non-tail recursion proportional to input size. The compiled test binary
already uses ~7.5MB of the 8MB default stack, so adding native compression
calls at 64KB+ overflows the stack. Only `ulimit -s unlimited` works around it.

**Threshold**: 32KB works reliably, 64KB overflows.

Data sizes capped at 32KB with a clear comment pointing to Track D iterative
LZ77 optimization as the fix.

## Commits

- `d7ef59c feat: add native compression benchmarks (throughput + ratio vs FFI)`

## Sorry count

Unchanged: 3 (same as session start)
