# Progress: Review — HuffmanCorrect.lean split + proof quality

- **Date**: 2026-02-24 UTC
- **Session type**: Review (file organization + proof quality)
- **Issue**: #209

## Accomplished

1. **Split HuffmanCorrect.lean** (835 → 435 + 411 lines):
   - `HuffmanCorrect.lean`: tree primitives (`decodeBits`, `TreeHasLeaf`,
     `NoLeafOnPath`, `insert_go_*` lemmas)
   - `HuffmanCorrectLoop.lean`: loop invariants (`fromLengths_ok_eq`,
     `insertLoop_forward/backward`, `decode_some_mem`, `initial_nc_invariant`,
     `fromLengths_hasLeaf`, `fromLengths_leaf_spec`)

2. **Visibility fixes**: Changed `NoLeafOnPath` and `insert_go_hasLeaf`,
   `insert_go_preserves`, `insert_go_noLeafOnPath`, `insert_go_complete'`
   from `private` to public (no modifier). Used public instead of
   `protected` to avoid cascading fully-qualified name changes in the
   same namespace.

3. **Proof quality**: Merged duplicate simp arguments in
   `initial_nc_invariant` (two separate simp calls sharing
   `Array.getElem!_eq_getD, Array.getD_eq_getD_getElem?` consolidated
   into one).

4. **Updated PROGRESS.md**: Sorry count 2 → 0, updated completed
   theorems list.

5. **Updated CLAUDE.md source layout**: Added `HuffmanCorrectLoop.lean`.

## Decisions

- Used public (no modifier) instead of `protected` for cross-file
  definitions. The CLAUDE.md caveat about `protected` requiring
  fully-qualified names even within the same namespace would have
  required changes to `simp only [NoLeafOnPath]` calls.

## Sorry count

- Start: 0
- End: 0

## What remains

All deliverables from issue #209 completed.
