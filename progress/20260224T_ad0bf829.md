# Progress Entry

- **Date**: 2026-02-24 UTC
- **Session type**: Worker (implementation)
- **Issue**: #180 — Review: split DecodeCorrect.lean (1432 lines) into correctness + completeness files
- **Branch**: `agent/ad0bf829`
- **Starting commit**: `2be3229`

## What was accomplished

Split `Zip/Spec/DecodeCorrect.lean` (1432 lines) into two files:
- `DecodeCorrect.lean` (710 lines) — forward-direction correctness proofs
- `DecodeComplete.lean` (737 lines) — reverse-direction completeness proofs

### Deliverables completed

1. **Changed 8 private definitions to public** in DecodeCorrect.lean for cross-file access:
   - `lengthBase_eq`, `lengthExtra_eq`, `distBase_eq`, `distExtra_eq` (table correspondence)
   - `lengthExtra_le_32`, `distExtra_le_32` (bounds lemmas)
   - `getElem?_eq_some_getElem!` (array helper)
   - `copyLoop_eq_ofFn` (LZ77 copy loop correspondence)

2. **Created `Zip/Spec/DecodeComplete.lean`** with completeness proofs:
   - `decodeStored_complete`, `huffTree_decode_complete`, `decodeHuffman_complete`
   - Private helpers: `decodeLitLen_huffDecode`, `decodeLitLen_literal_inv`, etc.

3. **Updated imports**: `DynamicTreesComplete.lean` now imports `DecodeComplete`, `Zip.lean` re-exports it

4. **Updated CLAUDE.md source layout**: removed stale `DecodeHelpers.lean` entry, added `DecodeComplete.lean`

5. **Updated PROGRESS.md**: sorry count 6 → 1, added recently proved theorems

## Decisions made

- Used public (no modifier) instead of `protected` for the 8 definitions. `protected` would require fully-qualified names (`Deflate.Correctness.lengthBase_eq`) even within the same namespace, but these are used with short names in the correctness section.
- Plan listed 9 private definitions but `spec_distBase_pos` was not referenced in Section B, so only 8 needed changes.

## Sorry count

- Start: 1 (`inflate_deflateDynamic` in `DeflateFixedCorrect.lean`)
- End: 1 (unchanged)

## Verification

- `lake build` — 158 jobs, success
- `lake exe test` — all tests passed
- Line counts: DecodeCorrect.lean 710, DecodeComplete.lean 737
