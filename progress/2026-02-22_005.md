# 2026-02-22: Implementation — prove copyLoop_spec, complete decodeHuffman_correct

**Session type**: Implementation
**Starting commit**: `90e6eeb` | **Sorry count**: 2 → 1

### Accomplished

Proved `copyLoop_spec` — the generalized loop invariant for the LZ77
copy loop. This was the last sorry blocking `decodeHuffman_correct`,
which is now fully proved.

Key insight: the `forIn` on `Range` (`[:length]`) uses well-founded
recursion via `Std.Legacy.Range.forIn'` whose inner `loop✝` is a local
`where` clause definition that CANNOT be unfolded by name. Even
`with_unfolding_all rfl` only works for concrete range values (like
`[:0]`, `[:1]`) but not symbolic `n`. Solution: replaced the `for` loop
in `decodeHuffman.go` with an explicit recursive `copyLoop` function.

Changes:
- **Inflate.lean**: Added `copyLoop` function, replaced `for` loop
- **InflateCorrect.lean**: Added `ba_getElem!_eq_toList`, `push_getElem_lt`,
  `push_data_toList`, `copyLoop_spec` (proved by well-founded induction),
  `copyLoop_eq_ofFn` (corollary). Fixed `decodeHuffman_correct` proof
  structure to work with `copyLoop` instead of `forIn`.

### Remaining

- `inflate_correct` (sorry): main theorem (block loop correspondence)
